{"version":3,"sources":["null","ng://@cloudinary/angular-5.x/lib/cloudinary.service.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-transformation.directive.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-placeholder.component.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-image.component.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-video.component.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-image-source.directive.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-background-image.directive.ts","ng://@cloudinary/angular-5.x/lib/cloudinary-lazy-load.directive.ts","ng://@cloudinary/angular-5.x/lib/cloudinary.module.ts"],"names":["__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","isJsonLikeString","str","trim","match","isNamedNodeMap","obj","constructor","name","NamedNodeMap","namedNodeMapToObject","source","target","Object","keys","forEach","index","transformKeyNames","_obj","JSON","parse","Array","isArray","map","currentValue","key","kebabKey","replace","toLocaleLowerCase","kebabValue","Cloudinary","cloudinaryJsLib","configuration","CloudinaryJQuery","this","_cloudinaryInstance","defineProperty","prototype","config","url","parameters","_i","_a","apply","imageTag","videoTag","responsive","img","options","cloudinary_update","toCloudinaryAttributes","attributes","childTransformations","_this","transformation","getAttributes","isBrowser","window","CloudinaryTransformationDirective","el","nativeElement","Directive","args","selector","ElementRef","CloudinaryPlaceHolder","cloudinary","setWidth","width","itemWidth","setHeight","height","itemHeight","setPublicId","id","publicId","ngAfterContentChecked","placeholderImg","getPlaceholderImage","placeholderImageOptions","vectorize","effect","quality","pixelate","fetch_format","blur","solid","aspect_ratio","crop","background","gravity","type","Component","template","Input","HostBinding","CloudinaryImage","EventEmitter","ngOnInit","observer","MutationObserver","loadImage","observe","childList","ngOnChanges","changes","isFirstChange","ngOnDestroy","disconnect","ngAfterViewInit","placeholderComponent","hasLoaded","shouldShowPlaceHolder","Error","image","children","onload","onLoad","emit","onerror","onError","transformations","clientHints","client_hints","placeholderHandler","setElementAttributes","element","attributesLiteral","attrName","attr","loading","setAttribute","placeholderOptions","startsWith","Math","floor","parseInt","ContentChildren","ContentChild","Output","CloudinaryVideo","platformId","loadVideo","isPlatformBrowser","video","appendSourceElements","content","html","fragment","document","createDocumentFragment","innerHTML","childNodes","appendChild","decorators","Inject","PLATFORM_ID","CloudinaryImageSourceDirective","propertyValue","clHref","clSrc","clSrcset","isSvg","toString","attrValue","ownerDocument","documentMode","CloudinaryBackgroundImageDirective","renderer","imageUrl","clBackgroundImage","setStyle","Renderer2","LazyLoadDirective","isNativeLazyLoadSupported","isLazyLoadSupported","lazyLoad","dataset","src","HTMLImageElement","rootMargin","IntersectionObserver","entries","entry","isIntersecting","unobserve","CLOUDINARY_LIB","InjectionToken","CLOUDINARY_CONFIGURATION","createCloudinary","CloudinaryModule","forRoot","cloudinaryConfiguration","ngModule","providers","provide","useValue","useFactory","deps","NgModule","imports","CommonModule","declarations","exports","provideCloudinary"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { QueryList } from '@angular/core';\nimport CloudinaryConfiguration from './cloudinary-configuration.class';\nimport { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';\n\n/**\n * Returns true if the given string begins with a left curly brace and ends with a right curly brace, e.g.\n * \"{asdas d}\" will return true, \"asdasd}\" will return false.\n *\n * this function does not validate the correctness of the string content other than the first and last character\n * @param str\n * @returns boolean\n */\nconst isJsonLikeString = function (str: any): boolean {\n  // [\\s\\S] allows the string to contain new lines\n  return str && typeof str === 'string' && (str.trim().match(/^{[\\s\\S]*?}$/) !== null);\n};\n\nconst isNamedNodeMap = function (obj: any): boolean {\n  return obj && (obj.constructor.name === 'NamedNodeMap' || obj instanceof NamedNodeMap);\n};\n\nconst namedNodeMapToObject = function (source: NamedNodeMap): any {\n  let target = {};\n  Object.keys(source).forEach(index => {\n    const name = source[index].name;\n    const value = source[index].value;\n    target[name] = value;\n  });\n  return target;\n};\n\nconst transformKeyNames = function (obj: any): any {\n  let _obj = obj;\n  if (isJsonLikeString(obj)) {\n    // Given attribute value is in the form of a JSON object -\n    // Transforms the string into an object, as the Javascript API expects\n    _obj = JSON.parse(obj);\n  } else if (isNamedNodeMap(obj)) {\n    _obj = namedNodeMapToObject(obj);\n  }\n\n  if (Array.isArray(_obj)) {\n    // Transform all the array values (e.g. transformation array)\n    _obj = _obj.map(currentValue => {\n      return transformKeyNames(currentValue);\n    });\n  } else if (typeof _obj === 'object') {\n    Object.keys(_obj).forEach(key => {\n      // Replace the key name with the snake_case\n      // Then strip cld prefix if it exists (with an optional dash or underscore)\n      const kebabKey = key.replace(/-/g, '_').toLocaleLowerCase().replace(/^cld(-|_)?/, '');\n      const kebabValue = transformKeyNames(_obj[key]);\n      delete _obj[key];\n      _obj[kebabKey] = kebabValue;\n    });\n  }\n  return _obj;\n};\n\nexport class Cloudinary {\n  _cloudinaryInstance: any;\n\n  constructor(cloudinaryJsLib: any, configuration: CloudinaryConfiguration) {\n    // Cloudinary JS already clones the given configuration so no need to clone it here too\n    if (cloudinaryJsLib.CloudinaryJQuery) {\n      this._cloudinaryInstance = new cloudinaryJsLib.CloudinaryJQuery(configuration);\n    } else {\n      this._cloudinaryInstance = new cloudinaryJsLib.Cloudinary(configuration);\n    }\n  }\n\n  get cloudinaryInstance(): any {\n    return this._cloudinaryInstance;\n  }\n\n  config() {\n    return this._cloudinaryInstance.config();\n  }\n\n  url(...parameters): string {\n    return this._cloudinaryInstance.url(...parameters);\n  }\n\n  imageTag(...parameters): any {\n    return this._cloudinaryInstance.imageTag(...parameters);\n  }\n\n  videoTag(...parameters): any {\n    return this._cloudinaryInstance.videoTag(...parameters);\n  }\n\n  responsive(img: HTMLImageElement, options: any): void {\n    // Cloudinary underlying JS library will handle responsive behavior\n    this._cloudinaryInstance.cloudinary_update(img, options);\n    this._cloudinaryInstance.responsive(options, false);\n  }\n\n\n  /**\n   * Transforms a set of attributes and chained transformations to an options object that can be consumed by Cloudinary JS API\n   * @param attributes HTML element attributes\n   * @param childTransformations QueryList with the element's <cl-transformation> children for chained transformations\n   * @param cloudinary Cloudinary service\n   * @returns An options object that can be consumed by Cloudinary JS API\n   */\n  toCloudinaryAttributes(attributes: NamedNodeMap,\n    childTransformations?: QueryList<CloudinaryTransformationDirective>): any {\n    const options = transformKeyNames(attributes);\n\n    // Add chained transformations\n    if (childTransformations && childTransformations.length > 0) {\n      options.transformation = [];\n      // Support chained transformations\n      childTransformations.forEach(transformation => {\n        options.transformation.push(this.toCloudinaryAttributes(transformation.getAttributes()));\n      });\n    }\n\n    // Add responsiveness\n    if (options.responsive === '' || options.responsive === 'true' || options.responsive === true) {\n      options.responsive = true;\n    }\n    return options;\n\n  };\n}\n\n/* Return a provider object that creates our configurable service */\nexport function provideCloudinary(cloudinaryJsLib: any, configuration: CloudinaryConfiguration) {\n  return { provide: Cloudinary, useFactory: () => new Cloudinary(cloudinaryJsLib, configuration) };\n};\n\nconst isBrowser = function (): boolean {\n  return typeof window !== 'undefined';\n}\n\n// For unit tests\nexport { isJsonLikeString, isNamedNodeMap, transformKeyNames, namedNodeMapToObject, isBrowser };\n","import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: 'cl-transformation'\n})\nexport class CloudinaryTransformationDirective {\n\n  constructor(private el: ElementRef) {\n  }\n\n  getAttributes(): NamedNodeMap {\n    return this.el.nativeElement.attributes;\n  }\n}\n\n","import {\n  AfterContentChecked,\n  Component,\n  HostBinding,\n  Input,\n} from '@angular/core';\nimport {Cloudinary} from './cloudinary.service';\n\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'cl-placeholder',\n  template: `<img [src]=\"this.placeholderImg\" [style.width.px]=\"this.itemWidth\" [style.height.px]=\"this.itemHeight\">`\n  ,\n})\nexport class CloudinaryPlaceHolder implements AfterContentChecked {\n  @Input('type') type: string;\n  @HostBinding('style.width') itemWidth;\n  @HostBinding('style.height') itemHeight;\n  @HostBinding('attr.public-id') publicId;\n\n  options: object = {};\n  placeholderImg: string;\n\n  constructor(private cloudinary: Cloudinary) {}\n\n  setWidth(width) {\n    this.itemWidth = width;\n  }\n\n  setHeight(height) {\n    this.itemHeight = height;\n  }\n\n  setPublicId(id) {\n    this.publicId = id;\n  }\n\n  ngAfterContentChecked() {\n    this.placeholderImg = this.getPlaceholderImage();\n  }\n\n  getPlaceholderImage() {\n    const placeholderImageOptions = {\n      'vectorize': {effect: 'vectorize', quality: 1},\n      'pixelate': {effect: 'pixelate', quality: 1, fetch_format: 'auto'},\n      'blur': {effect: 'blur:2000', quality: 1, fetch_format: 'auto'},\n      'solid': [\n        {width: 'iw_div_2', aspect_ratio: 1, crop: 'pad', background: 'auto'},\n        {crop: 'crop', width: 10, height: 10, gravity: 'north_east'},\n        {width: 'iw', height: 'ih', crop: 'fill'},\n        {fetch_format: 'auto', quality: 'auto'}]\n    }\n    const transformation = [].concat.apply([], [this.options, placeholderImageOptions[this.type] || placeholderImageOptions['blur']]);\n    const test = this.cloudinary.url(this.publicId, {transformation: transformation});\n\n    return test;\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  Output,\n  ContentChildren,\n  QueryList,\n  AfterViewInit,\n  AfterContentChecked,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  OnDestroy,\n  ContentChild,\n} from '@angular/core';\nimport { Cloudinary } from './cloudinary.service';\nimport { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';\nimport { CloudinaryPlaceHolder } from './cloudinary-placeholder.component';\nimport { isBrowser } from './cloudinary.service';\n\n@Component({\n  selector: 'cl-image',\n  template: `<img [ngStyle]=\"{opacity: shouldShowPlaceHolder ? '0' : '1', position: shouldShowPlaceHolder ? 'absolute' : 'unset'}\"(load)=\"hasLoaded()\">\n  <div [style.display]=\"shouldShowPlaceHolder ? 'inline' : 'none'\">\n      <ng-content></ng-content>\n  </div>\n  `,\n})\nexport class CloudinaryImage\n  implements AfterViewInit, OnInit, AfterViewInit, AfterContentChecked, OnChanges, OnDestroy {\n  @Input('public-id') publicId: string;\n  @Input('client-hints') clientHints?: boolean;\n  @Input('loading') loading: string;\n  @Input('width') width?: string;\n  @Input('height') height?: string;\n\n  @ContentChildren(CloudinaryTransformationDirective)\n  transformations: QueryList<CloudinaryTransformationDirective>;\n  @ContentChild(CloudinaryPlaceHolder) placeholderComponent: CloudinaryPlaceHolder;\n\n  @Output() onLoad: EventEmitter<boolean> = new EventEmitter(); // Callback when an image is loaded successfully\n  @Output() onError: EventEmitter<boolean> = new EventEmitter(); // Callback when an image is loaded with error\n\n  observer: MutationObserver;\n  shouldShowPlaceHolder = true;\n\n  constructor(private el: ElementRef, private cloudinary: Cloudinary) {}\n\n  ngOnInit(): void {\n    if (isBrowser()) {\n      // Create an observer instance\n      this.observer = new MutationObserver(() => {\n        this.loadImage();\n      });\n      // Observe changes to attributes or child transformations to re-render the image\n      const config = { attributes: true, childList: true };\n\n      // pass in the target node, as well as the observer options\n      this.observer.observe(this.el.nativeElement, config);\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // Listen to changes on the data-bound property 'publicId'.\n    // Update component unless this is the first value assigned.\n    if (changes.publicId && !changes.publicId.isFirstChange()) {\n      this.loadImage();\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.observer && this.observer.disconnect) {\n      this.observer.disconnect();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.loadImage();\n  }\n\n  ngAfterContentChecked() {\n    if (this.width && this.placeholderComponent) {\n      this.placeholderComponent.setWidth(this.width);\n    }\n    if (this.height && this.placeholderComponent) {\n      this.placeholderComponent.setHeight(this.height);\n    }\n    if (this.placeholderComponent) {\n      this.placeholderComponent.setPublicId(this.publicId);\n    }\n  }\n\n  hasLoaded() {\n    this.shouldShowPlaceHolder = false;\n  }\n\n  loadImage() {\n    // https://github.com/angular/universal#universal-gotchas\n    // Fetch the image only for client side rendering by the browser\n    if (isBrowser()) {\n      if (!this.publicId) {\n        throw new Error(\n          'You must set the public id of the image to load, e.g. <cl-image public-id={{photo.public_id}}...></cl-image>'\n        );\n      }\n      const nativeElement = this.el.nativeElement;\n      const image = nativeElement.children[0];\n      // Add onload and onerror handlers\n      image.onload = e => {\n        this.onLoad.emit(e);\n      };\n      image.onerror = e => {\n        this.onError.emit(e);\n      };\n      const options = this.cloudinary.toCloudinaryAttributes(\n        nativeElement.attributes,\n        this.transformations\n      );\n      if (this.clientHints || (typeof this.clientHints === 'undefined' && this.cloudinary.config().client_hints)) {\n        delete options['class'];\n        delete options['data-src'];\n        delete options['responsive'];\n      }\n      if (this.placeholderComponent) {\n        this.placeholderHandler(options);\n      }\n      const imageTag = this.cloudinary.imageTag(this.publicId, options);\n\n      this.setElementAttributes(image, imageTag.attributes());\n      if (options.responsive) {\n        this.cloudinary.responsive(image, options);\n      }\n    }\n  }\n\n  setElementAttributes(element, attributesLiteral) {\n    Object.keys(attributesLiteral).forEach(attrName => {\n      const attr = attrName === 'src' && this.loading === 'lazy' ? 'data-src' : attrName;\n      element.setAttribute(attr, attributesLiteral[attrName]);\n    });\n  }\n\n  placeholderHandler(options) {\n    const placeholderOptions = {};\n\n    Object.keys(options).forEach(name => {\n      placeholderOptions[name] = (name === 'width' && !options[name].startsWith('auto') || name === 'height') ? Math.floor(parseInt(options[name], 10) * 0.1) : options[name];\n    });\n    this.placeholderComponent.options = placeholderOptions;\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  ContentChildren,\n  QueryList,\n  AfterViewInit,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  OnDestroy,\n  PLATFORM_ID,\n  Inject,\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Cloudinary } from './cloudinary.service';\nimport { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';\n\n@Component({\n  selector: 'cl-video',\n  template: '<video></video>'\n})\n// See also video reference - http://cloudinary.com/documentation/video_manipulation_and_delivery#video_transformations_reference\nexport class CloudinaryVideo\n  implements AfterViewInit, OnInit, OnChanges, OnDestroy {\n  @Input('public-id') publicId: string;\n\n  @ContentChildren(CloudinaryTransformationDirective)\n  transformations: QueryList<CloudinaryTransformationDirective>;\n\n  observer: MutationObserver;\n\n  constructor(private el: ElementRef, private cloudinary: Cloudinary, @Inject(PLATFORM_ID) private platformId: Object) {}\n\n  ngOnInit(): void {\n    if (typeof MutationObserver !== 'undefined') {\n      // Create an observer instance\n      this.observer = new MutationObserver(() => {\n        this.loadVideo(this.publicId);\n      });\n      // Observe changes to attributes or child transformations to re-render the image\n      const config = { attributes: true, childList: true };\n\n      // pass in the target node, as well as the observer options\n      this.observer.observe(this.el.nativeElement, config);\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // Listen to changes on the data-bound property 'publicId'.\n    // Update component unless this is the first value assigned.\n    if (changes.publicId && !changes.publicId.isFirstChange()) {\n      this.loadVideo(changes.publicId.currentValue);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.observer && this.observer.disconnect) {\n      this.observer.disconnect();\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!this.publicId) {\n      throw new Error(\n        'You must set the public id of the video to load, e.g. <cl-video public-id={{video.public_id}}...></cl-video>'\n      );\n    }\n    this.loadVideo(this.publicId);\n  }\n\n  loadVideo(publicId: string) {\n    // https://github.com/angular/universal#universal-gotchas\n    if (isPlatformBrowser(this.platformId)) {\n      const nativeElement = this.el.nativeElement;\n      const video = nativeElement.children[0];\n      const options = this.cloudinary.toCloudinaryAttributes(\n        nativeElement.attributes,\n        this.transformations\n      );\n\n      const videoTag = this.cloudinary.videoTag(publicId, options);\n\n      // Replace template with the custom video tag created by Cloudinary\n      this.appendSourceElements(video, videoTag.content());\n      // Add attributes\n      this.setElementAttributes(video, videoTag.attributes());\n    }\n  }\n\n  setElementAttributes(element, attributesLiteral) {\n    Object.keys(attributesLiteral).forEach(attrName => {\n      element.setAttribute(attrName, attributesLiteral[attrName]);\n    });\n  }\n\n  appendSourceElements(element, html) {\n    const fragment = document.createDocumentFragment();\n    element.innerHTML = html;\n\n    while (element.childNodes[0]) {\n      fragment.appendChild(element.childNodes[0]);\n    }\n    element.appendChild(fragment);\n  }\n}\n","import {Directive, ElementRef, AfterViewInit, Input, QueryList, ContentChildren} from '@angular/core';\nimport {Cloudinary} from './cloudinary.service';\nimport {CloudinaryTransformationDirective} from './cloudinary-transformation.directive';\nimport { isBrowser } from './cloudinary.service';\n\n@Directive({\n    selector: '[clHref], [clSrc], [clSrcset]'\n})\nexport class CloudinaryImageSourceDirective implements AfterViewInit {\n\n    @Input() clHref: string;\n    @Input() clSrc: string;\n    @Input() clSrcset: string;\n\n    @ContentChildren(CloudinaryTransformationDirective)\n    transformations: QueryList<CloudinaryTransformationDirective>;\n\n    constructor(private el: ElementRef, private cloudinary: Cloudinary) {\n    }\n\n    ngAfterViewInit() {\n      if (isBrowser()) {\n        let attrName: string;\n        let propertyValue: string;\n        if (this.clHref) {\n            attrName = 'href';\n            propertyValue = this.clHref;\n        } else if (this.clSrc) {\n            attrName = 'src';\n            propertyValue = this.clSrc;\n        } else if (this.clSrcset) {\n            attrName = 'srcset';\n            propertyValue = this.clSrcset;\n        }\n\n        let isSvg = false;\n\n        if (this.clHref &&\n            toString.call(this.el.nativeElement['href'] === '[object SVGAnimatedString]')) {\n            this.el.nativeElement.setAttribute('xlinkHref', 'xlink:href');\n            isSvg = true;\n        }\n\n        if (!attrName || !propertyValue) {\n            throw new Error('Directive value is missing for clHref/clSrc/clSrcset');\n        }\n\n        const nativeElement = this.el.nativeElement;\n        const options = this.cloudinary.toCloudinaryAttributes(nativeElement.attributes, this.transformations);\n\n        const attrValue = this.cloudinary.url(propertyValue, options);\n        this.el.nativeElement.setAttribute(attrName, attrValue);\n\n        /*\n         on IE, if \"ngSrc\" directive declaration is used and \"src\" attribute doesn't exist\n         then calling element.setAttribute('src', 'foo') doesn't do anything, so we need\n         to set the property as well to achieve the desired effect.\n\n         Check for IE: http://stackoverflow.com/a/32139375/198095\n         if is IE then documentMode contains IE version\n         */\n        const msie = this.el.nativeElement.ownerDocument.documentMode;\n        if (msie && !isSvg) {\n            // IE logic here\n            this.el.nativeElement[attrName] = attrValue;\n        }\n      }\n    };\n}\n","import {Directive, ElementRef, Renderer2, AfterViewInit, Input, QueryList, ContentChildren} from '@angular/core';\nimport {Cloudinary} from './cloudinary.service';\nimport {CloudinaryTransformationDirective} from './cloudinary-transformation.directive';\n\n@Directive({\n    selector: '[clBackgroundImage]'\n})\nexport class CloudinaryBackgroundImageDirective implements AfterViewInit {\n\n    @Input() clBackgroundImage: string;\n\n    @ContentChildren(CloudinaryTransformationDirective)\n    transformations: QueryList<CloudinaryTransformationDirective>;\n\n    constructor(private renderer: Renderer2, private el: ElementRef, private cloudinary: Cloudinary) {\n    }\n\n    isBrowser(): boolean {\n      return typeof window !== 'undefined';\n    }\n\n    ngAfterViewInit() {\n      if (this.isBrowser()) {\n        const nativeElement = this.el.nativeElement;\n        const options = this.cloudinary.toCloudinaryAttributes(nativeElement.attributes, this.transformations);\n        const imageUrl = this.cloudinary.url(this.clBackgroundImage, options);\n        this.renderer.setStyle(nativeElement, 'background-image', `url('${imageUrl}')`);\n        this.renderer.setStyle(nativeElement, 'background-repeat', 'no-repeat');\n        this.renderer.setStyle(nativeElement, 'background-position', 'center');\n      }\n  }\n}\n","import {AfterViewInit, Directive, ElementRef} from '@angular/core';\n\n\n@Directive({\n  selector: 'cl-image[loading=lazy]'\n})\nexport class LazyLoadDirective implements AfterViewInit {\n\n  constructor(private el: ElementRef) {}\n\n  ngAfterViewInit() {\n      if (!this.isNativeLazyLoadSupported() && this.isLazyLoadSupported()) {\n        this.lazyLoad();\n      } else {\n        this.loadImage();\n      }\n  }\n\n  loadImage() {\n    const nativeElement = this.el.nativeElement;\n    const image = nativeElement.children[0];\n    image.setAttribute('src', image.dataset.src);\n  }\n\n  isLazyLoadSupported() {\n    return window && 'IntersectionObserver' in window;\n  }\n\n  isNativeLazyLoadSupported() {\n    return 'loading' in HTMLImageElement.prototype; // check loading property is defined on image or iframe\n  }\n\n  lazyLoad() {\n    const options = {\n      rootMargin: `0px 0px -50% 0px`, // Margin around the root\n    };\n    const observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            this.loadImage();\n            observer.unobserve(entry.target);\n          }\n        }, options);\n      });\n    observer.observe(this.el.nativeElement);\n  }\n}\n","'use strict';\n/* App Module */\nimport { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Cloudinary } from './cloudinary.service';\nimport { CloudinaryImage } from './cloudinary-image.component';\nimport { CloudinaryVideo } from './cloudinary-video.component';\nimport { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';\nimport { CloudinaryImageSourceDirective } from './cloudinary-image-source.directive';\nimport { CloudinaryBackgroundImageDirective } from './cloudinary-background-image.directive';\nimport CloudinaryConfiguration from './cloudinary-configuration.class';\nimport { LazyLoadDirective } from './cloudinary-lazy-load.directive';\nimport { CloudinaryPlaceHolder } from './cloudinary-placeholder.component';\n\n// Export for lib consumers\nexport { CloudinaryImage } from './cloudinary-image.component';\nexport { CloudinaryVideo } from './cloudinary-video.component';\nexport { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';\nexport { CloudinaryImageSourceDirective } from './cloudinary-image-source.directive';\nexport { CloudinaryBackgroundImageDirective } from './cloudinary-background-image.directive';\nexport { LazyLoadDirective } from './cloudinary-lazy-load.directive';\nexport { CloudinaryPlaceHolder } from'./cloudinary-placeholder.component';\n\n\nexport { Cloudinary, provideCloudinary } from './cloudinary.service';\n\nexport { CloudinaryConfiguration };\n\nexport const CLOUDINARY_LIB = new InjectionToken('CLOUDINARY_LIB');\nexport const CLOUDINARY_CONFIGURATION = new InjectionToken('CLOUDINARY_CONFIGURATION');\n\n// Export this function to Angular's AOT to work\nexport function createCloudinary(cloudinaryJsLib: object, configuration: CloudinaryConfiguration) {\n  return new Cloudinary(cloudinaryJsLib, configuration);\n};\n\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  declarations: [\n    CloudinaryImageSourceDirective,\n    CloudinaryBackgroundImageDirective,\n    CloudinaryImage,\n    CloudinaryVideo,\n    CloudinaryTransformationDirective,\n    LazyLoadDirective,\n    CloudinaryPlaceHolder,\n  ],\n  exports: [\n    CloudinaryImageSourceDirective,\n    CloudinaryBackgroundImageDirective,\n    CloudinaryImage,\n    CloudinaryVideo,\n    CloudinaryTransformationDirective,\n    LazyLoadDirective,\n    CloudinaryPlaceHolder\n  ]\n})\nexport class CloudinaryModule {\n  static forRoot(cloudinaryJsLib: object, cloudinaryConfiguration: CloudinaryConfiguration): ModuleWithProviders<CloudinaryModule> {\n    return {\n      ngModule: CloudinaryModule,\n      providers: [\n        { provide: CLOUDINARY_LIB, useValue: cloudinaryJsLib },\n        { provide: CLOUDINARY_CONFIGURATION, useValue: cloudinaryConfiguration },\n        {\n          provide: Cloudinary,\n          useFactory: createCloudinary,\n          deps: [CLOUDINARY_LIB, CLOUDINARY_CONFIGURATION]\n        }\n      ]\n    };\n  }\n}\n"]}